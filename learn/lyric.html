<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lyrics</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base body styles for background animation and font */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c;
            background-image: linear-gradient(135deg, #1a202c 0%, #2d3748 50%, #1a202c 100%);
            background-size: 200% 200%;
            background-attachment: fixed;
            color: #e2e8f0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
            overflow: hidden;
            /* Prevent body scrollbars from effects */
            animation: slideBg 60s linear infinite alternate;
        }

        /* Keyframe animation for background slide */
        @keyframes slideBg {
            0% {
                background-position: 0% 50%;
            }

            100% {
                background-position: 100% 50%;
            }
        }

        /* Styles for the main content container */
        .container {
            max-width: 900px;
            width: 100%;
            /* Placeholder image. Replace with your actual image URL. */
            background-image: url('net.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            padding: 2rem;
            animation: fadeIn 0.8s ease-out;
            position: relative;
            /* For z-index context */
            z-index: 10;
            /* Ensure container is above effects */
        }

        /* Keyframe animation for container fade-in */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Styles for the lyrics container */
        #lyrics-container {
            /* Semi-transparent background to allow image to show through but keep text readable */
            background: rgba(0, 0, 0, 0.4);
            /* Dark, semi-transparent */
            border-radius: 0.75rem;
            /* Match lyric lines */
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
            /* Subtle inner shadow */
            padding: 1rem;
            /* More padding inside the container */
        }

        /* Styles for individual lyric lines */
        .lyric-line {
            padding: 0.5rem 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: 0.75rem;
            transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
            font-size: 1.25rem;
            line-height: 1.5;
            text-align: center;
            word-wrap: break-word;
            color: #e2e8f0;
            /* Default color for inactive lyrics */
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }

        /* Styles for the active lyric line */
        .lyric-line.active {
            background-color: #ffffff;
            /* White background for active line */
            color: #1a202c;
            /* Dark text for active line */
            font-weight: 700;
            /* Bolder active line */
            transform: scale(1.03);
            /* Slightly larger scale */
            box-shadow: 0 4px 15px rgba(99, 179, 237, 0.5);
            /* More prominent shadow for active */
            text-shadow: none;
            /* Remove text shadow when active, as background is solid */
        }

        /* Styles for control buttons */
        .control-button {
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        }

        .control-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        /* Custom scrollbar styles */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(45, 55, 72, 0.5);
            /* Semi-transparent scrollbar track */
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #63b3ed;
            /* Brighter scrollbar thumb */
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #90cdf4;
            /* Lighter on hover */
            border-radius: 10px;
        }

        /* --- Snow Effect Styles --- */
        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            /* Allows clicks to pass through */
            z-index: 5;
            /* Below content, above background */
            overflow: hidden;
        }

        .snow {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: snowfall linear infinite;
        }

        /* Keyframe animation for snowflakes */
        @keyframes snowfall {
            0% {
                transform: translate3d(0, -10vh, 0);
                opacity: 0;
            }

            10% {
                opacity: 0.8;
            }

            100% {
                transform: translate3d(var(--x-end), 100vh, 0);
                opacity: 0;
            }
        }

        /* --- Rain Effect Styles --- */
        .rain-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 6;
            /* Slightly above snow */
            overflow: hidden;
        }

        .rain-drop {
            position: absolute;
            background: linear-gradient(to bottom, rgba(173, 216, 230, 0.5), rgba(173, 216, 230, 0.2));
            width: 2px;
            height: 30px;
            animation: raindropfall linear infinite;
            transform-origin: top center;
            /* For diagonal effect */
        }

        /* Keyframe animation for raindrops */
        @keyframes raindropfall {
            0% {
                transform: translate3d(0, -10vh, 0) rotate(10deg);
                opacity: 0;
            }

            10% {
                opacity: 0.6;
            }

            100% {
                transform: translate3d(var(--x-end-rain), 100vh, 0) rotate(10deg);
                opacity: 0;
            }
        }

        /* --- Smoke Effect Styles --- */
        .smoke-container {
            position: fixed;
            bottom: 0;
            /* Starts from bottom */
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 4;
            /* Below other effects and content */
            overflow: hidden;
        }

        .smoke-puff {
            position: absolute;
            background: rgba(100, 100, 100, 0.2);
            /* Greyish, translucent */
            border-radius: 50%;
            filter: blur(10px);
            /* Blurry appearance */
            animation: smoke-float linear infinite;
        }

        /* Keyframe animation for smoke puffs */
        @keyframes smoke-float {
            0% {
                transform: translate(-50%, 0%) scale(0.2);
                opacity: 0;
            }

            20% {
                opacity: 0.3;
            }

            100% {
                transform: translate(var(--x-offset-smoke), -100vh) scale(var(--scale-end));
                opacity: 0;
            }
        }
    </style>
</head>

<body>
    <!-- Snow Container: This div will hold the dynamically created snow particles -->
    <div class="snow-container" id="snow-container"></div>
    <!-- Rain Container: This div will hold the dynamically created rain particles -->
    <div class="rain-container" id="rain-container"></div>
    <!-- Smoke Container: This div will hold the dynamically created smoke particles -->
    <div class="smoke-container" id="smoke-container"></div>

    <div class="container flex flex-col items-center">
        <h1 class="text-4xl font-bold mb-8 text-center text-blue-300" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">I wanna be your</h1>
        <div id="lyrics-container" class="w-full max-h-96 overflow-y-auto mb-8">
            <!-- Lyrics will be dynamically inserted here by JavaScript -->
        </div>

        <div class="flex space-x-4 mt-4">
            <button id="startButton" class="control-button bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50">
                Start
            </button>
            <button id="stopButton" class="control-button bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50" disabled>
                Stop
            </button>
            <button id="resetButton" class="control-button bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50" disabled>
                Reset
            </button>
        </div>
        <!-- Audio element for background music -->
        <audio id="backgroundAudio" src="1.mp3" preload="auto"></audio>
    </div>

    <script>
        // Array containing the lyrics for the song
        const lyrics = [
            "Let sing the song",
            "I wanna be your vacuum cleaner",
            "Breathin'in your dust",
            "I wanna be your Ford Cortina",
            "I will never rust",
            "If you like your coffee hot",
            "Let me be your coffe pot",
            "You call the shots, Babe",
            "I just wanna be your",

            "Secrets I have held in my heart",
            "Are harder to hide than I thought",
            "Maybe I just wanna be yours",

            "I wanna be yours",
            "I wanna be yours",
            "Wanna be yours",
            "Wanna be yours",
            "Wanna be yours",

            "Let me be your 'leccy meter",
            "An' I'll never run out",
            "Let me be the portable heater",
            "That you'll get cold without",
            "I wanna be your setting lotion (Wanna be)",
            "Hold your hair in deep devotion (How deep?)",
            "At least as deep as the Pacific Ocean",
            "I wanna be yours",
        ];

        // Constants for lyric timing
        const SECONDS_PER_LINE = 3.95;
        const FIRST_LINE_DURATION = 17;

        // Get references to DOM elements
        const lyricsContainer = document.getElementById('lyrics-container');
        const startButton = document.getElementById('startButton');
        const stopButton = document.getElementById('stopButton');
        const resetButton = document.getElementById('resetButton');
        const backgroundAudio = document.getElementById('backgroundAudio');

        // Get references to effect containers
        const snowContainer = document.getElementById('snow-container');
        const rainContainer = document.getElementById('rain-container');
        const smokeContainer = document.getElementById('smoke-container');

        // Variables for lyric tracking and intervals/timeouts
        let currentLineIndex = 0;
        let intervalId = null;
        let firstLineTimeoutId = null;

        // Variables for effect intervals
        let snowInterval;
        let rainInterval;
        let smokeInterval;

        /**
         * Generates a random number within a specified range.
         * @param {number} min - The minimum value.
         * @param {number} max - The maximum value.
         * @returns {number} A random number between min and max.
         */
        function getRandom(min, max) {
            return Math.random() * (max - min) + min;
        }

        // --- Snow Effect Functions ---
        /**
         * Creates and appends a single snowflake element to the snow container.
         * Each snowflake has random size, position, duration, and horizontal drift.
         */
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snow');
            const size = getRandom(2, 6); // Snowflake size in pixels
            snowflake.style.width = `${size}px`;
            snowflake.style.height = `${size}px`;
            snowflake.style.left = `${getRandom(0, 100)}vw`; // Random horizontal position (viewport width)
            snowflake.style.animationDuration = `${getRandom(10, 20)}s`; // Random fall duration
            snowflake.style.animationDelay = `${getRandom(0, 5)}s`; // Random start delay
            snowflake.style.setProperty('--x-end', `${getRandom(-20, 20)}vw`); // Horizontal drift end position

            snowContainer.appendChild(snowflake);

            // Remove snowflake element once its animation completes to prevent DOM bloat
            snowflake.addEventListener('animationend', () => {
                snowflake.remove();
            });
        }

        /**
         * Starts the snow effect by periodically creating new snowflakes.
         */
        function startSnow() {
            // Clear any existing interval to prevent duplicates
            if (snowInterval) clearInterval(snowInterval);
            snowInterval = setInterval(createSnowflake, 300); // Generate a snowflake every 300ms
        }

        /**
         * Stops the snow effect and clears all existing snowflakes from the DOM.
         */
        function stopSnow() {
            clearInterval(snowInterval);
            snowContainer.innerHTML = ''; // Clear existing snowflakes
        }

        // --- Rain Effect Functions ---
        /**
         * Creates and appends a single raindrop element to the rain container.
         * Each raindrop has random height, position, duration, and slight diagonal drift.
         */
        function createRaindrop() {
            const raindrop = document.createElement('div');
            raindrop.classList.add('rain-drop');
            const height = getRandom(20, 40); // Raindrop height in pixels
            raindrop.style.height = `${height}px`;
            raindrop.style.left = `${getRandom(0, 100)}vw`; // Random horizontal position
            raindrop.style.animationDuration = `${getRandom(0.8, 1.5)}s`; // Random fall duration
            raindrop.style.animationDelay = `${getRandom(0, 0.5)}s`; // Random start delay
            raindrop.style.setProperty('--x-end-rain', `${getRandom(-5, 5)}vw`); // Slight horizontal drift for rain

            rainContainer.appendChild(raindrop);

            // Remove raindrop element once its animation completes
            raindrop.addEventListener('animationend', () => {
                raindrop.remove();
            });
        }

        /**
         * Starts the rain effect by periodically creating new raindrops.
         */
        function startRain() {
            // Clear any existing interval to prevent duplicates
            if (rainInterval) clearInterval(rainInterval);
            rainInterval = setInterval(createRaindrop, 50); // Generate a raindrop every 50ms
        }

        /**
         * Stops the rain effect and clears all existing raindrops from the DOM.
         */
        function stopRain() {
            clearInterval(rainInterval);
            rainContainer.innerHTML = ''; // Clear existing raindrops
        }

        // --- Smoke Effect Functions ---
        /**
         * Creates and appends a single smoke puff element to the smoke container.
         * Each smoke puff has random size, initial position, duration, horizontal drift, and scales up as it rises.
         */
        function createSmokePuff() {
            const smokePuff = document.createElement('div');
            smokePuff.classList.add('smoke-puff');
            const size = getRandom(50, 150); // Initial smoke puff size in pixels
            smokePuff.style.width = `${size}px`;
            smokePuff.style.height = `${size}px`;
            // Position near the bottom, centered horizontally initially, then drifts
            smokePuff.style.left = `calc(${getRandom(40, 60)}vw - ${size / 2}px)`;
            smokePuff.style.bottom = `${getRandom(-20, 0)}px`; // Slightly off-screen bottom for subtle entry
            smokePuff.style.animationDuration = `${getRandom(15, 30)}s`; // Slower float duration
            smokePuff.style.animationDelay = `${getRandom(0, 5)}s`; // Random start delay
            smokePuff.style.setProperty('--x-offset-smoke', `${getRandom(-10, 10)}vw`); // Horizontal drift
            smokePuff.style.setProperty('--scale-end', `${getRandom(1.5, 3)}`); // Scale factor at animation end

            smokeContainer.appendChild(smokePuff);

            // Remove smoke puff element once its animation completes
            smokePuff.addEventListener('animationend', () => {
                smokePuff.remove();
            });
        }

        /**
         * Starts the smoke effect by periodically creating new smoke puffs.
         */
        function startSmoke() {
            // Clear any existing interval to prevent duplicates
            if (smokeInterval) clearInterval(smokeInterval);
            smokeInterval = setInterval(createSmokePuff, 1000); // Generate a smoke puff every 1 second
        }

        /**
         * Stops the smoke effect and clears all existing smoke puffs from the DOM.
         */
        function stopSmoke() {
            clearInterval(smokeInterval);
            smokeContainer.innerHTML = ''; // Clear existing smoke puffs
        }

        // --- Existing Lyrics Logic (modified to integrate effects) ---

        /**
         * Initializes the display of lyrics by creating and appending div elements for each line.
         */
        function initializeLyricsDisplay() {
            lyricsContainer.innerHTML = ''; // Clear existing lyrics
            lyrics.forEach((line, index) => {
                const lineElement = document.createElement('div');
                lineElement.id = `lyric-line-${index}`;
                lineElement.classList.add('lyric-line');
                // Display '♪' for empty lines
                lineElement.textContent = line.trim() === '' ? '♪' : line;
                lyricsContainer.appendChild(lineElement);
            });
        }

        /**
         * Updates the active lyric line display, highlighting the current line and scrolling it into view.
         */
        function updateLyricDisplay() {
            if (currentLineIndex > 0) {
                const prevLineElement = document.getElementById(`lyric-line-${currentLineIndex - 1}`);
                if (prevLineElement) {
                    prevLineElement.classList.remove('active');
                }
            }
            const currentLineElement = document.getElementById(`lyric-line-${currentLineIndex}`);
            if (currentLineElement) {
                currentLineElement.classList.add('active');
                currentLineElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        /**
         * Starts the lyrics playback and initializes all visual effects.
         * Handles the special duration for the first lyric line.
         */
        function startLyrics() {
            // Prevent starting if already running
            if (intervalId === null && firstLineTimeoutId === null) {
                startButton.disabled = true;
                stopButton.disabled = false;
                resetButton.disabled = true;

                // Start all visual effects
                startSnow();
                startRain();
                startSmoke();

                // Attempt to play audio, handling potential user interaction requirement
                backgroundAudio.play().catch(error => {
                    console.error("Audio playback failed (user interaction might be required):", error);
                });

                if (currentLineIndex === 0) {
                    // Display the first lyric immediately
                    updateLyricDisplay();
                    // Set a timeout for the first line, then start regular interval
                    firstLineTimeoutId = setTimeout(() => {
                        const firstLineElement = document.getElementById(`lyric-line-0`);
                        if (firstLineElement) {
                            firstLineElement.classList.remove('active');
                        }
                        currentLineIndex++;
                        if (currentLineIndex < lyrics.length) {
                            updateLyricDisplay();
                            // Start regular interval for subsequent lines
                            intervalId = setInterval(() => {
                                currentLineIndex++;
                                if (currentLineIndex < lyrics.length) {
                                    updateLyricDisplay();
                                } else {
                                    // Stop lyrics and enable reset when all lines are done
                                    stopLyrics();
                                    resetButton.disabled = false;
                                }
                            }, SECONDS_PER_LINE * 1000);
                        } else {
                            // If only one lyric, stop after first line duration
                            stopLyrics();
                            resetButton.disabled = false;
                        }
                        firstLineTimeoutId = null; // Clear the timeout ID
                    }, FIRST_LINE_DURATION * 1000);
                } else {
                    // If not starting from the first line, immediately begin regular interval
                    updateLyricDisplay();
                    intervalId = setInterval(() => {
                        currentLineIndex++;
                        if (currentLineIndex < lyrics.length) {
                            updateLyricDisplay();
                        } else {
                            stopLyrics();
                            resetButton.disabled = false;
                        }
                    }, SECONDS_PER_LINE * 1000);
                }
            }
        }

        /**
         * Stops the lyrics playback and all visual effects.
         */
        function stopLyrics() {
            // Clear lyric intervals and timeouts
            if (intervalId !== null) {
                clearInterval(intervalId);
                intervalId = null;
            }
            if (firstLineTimeoutId !== null) {
                clearTimeout(firstLineTimeoutId);
                firstLineTimeoutId = null;
            }

            // Stop all visual effects
            stopSnow();
            stopRain();
            stopSmoke();

            // Enable/disable buttons
            startButton.disabled = false;
            stopButton.disabled = true;
            resetButton.disabled = false;
            backgroundAudio.pause(); // Pause the audio
        }

        /**
         * Resets the lyrics display and audio to the beginning.
         * Also stops any active effects.
         */
        function resetLyrics() {
            stopLyrics(); // Stop lyrics and effects first
            const activeLine = document.querySelector('.lyric-line.active');
            if (activeLine) {
                activeLine.classList.remove('active');
            }
            currentLineIndex = 0; // Reset lyric index
            initializeLyricsDisplay(); // Re-render lyrics
            // Reset button states
            startButton.disabled = false;
            stopButton.disabled = true;
            resetButton.disabled = true;
            backgroundAudio.currentTime = 0; // Reset audio to start
        }

        // Event listeners for control buttons
        startButton.addEventListener('click', startLyrics);
        stopButton.addEventListener('click', stopLyrics);
        resetButton.addEventListener('click', resetLyrics);

        // Initial setup when the page loads
        initializeLyricsDisplay();
    </script>
</body>

</html>
